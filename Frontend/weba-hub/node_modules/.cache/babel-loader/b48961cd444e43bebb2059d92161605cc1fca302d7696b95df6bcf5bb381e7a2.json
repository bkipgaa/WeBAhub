{"ast":null,"code":"var _jsxFileName = \"C:\\\\Learning\\\\Programming_Projects\\\\Programming_Projects\\\\Weba-Hub\\\\Frontend\\\\weba-hub\\\\src\\\\Components\\\\UserIcon\\\\UserIcon.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jwtDecode } from 'jwt-decode';\nimport axios from 'axios';\nimport './UserIcon.css';\nimport default_image from '../../Assets/default-image.jpg';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UserIcon() {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n  const [showSignup, setShowSignup] = useState(false);\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('');\n  const [roles, setRoles] = useState([]);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(true); // Add loading state\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const decodedToken = jwtDecode(token); // Decode token\n        setIsAuthenticated(true);\n        setUsername(decodedToken.user || ''); // Handle missing fields gracefully\n        setEmail(decodedToken.email || '');\n      } catch (error) {\n        console.error('Error decoding token:', error);\n        localStorage.removeItem('token'); // Remove invalid token\n        setIsAuthenticated(false);\n      }\n    }\n    setLoading(false); // Set loading to false after token validation\n  }, []);\n  useEffect(() => {\n    const fetchRoles = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/roles/fetch');\n        setRoles(response.data);\n      } catch (error) {\n        console.error('Error fetching roles:', error);\n      }\n    };\n    fetchRoles();\n  }, []);\n  const handleSignup = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('http://localhost:5000/api/users/register', {\n        username,\n        password,\n        email,\n        role\n      });\n      setMessage(response.data.message);\n      setShowSignup(false);\n      setShowLogin(true);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'An error occurred');\n    }\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('http://localhost:5000/api/users/login', {\n        email,\n        password\n      });\n      // Access the user object from the response\n      const {\n        user\n      } = response.data; // Extract the user object\n      setUsername(user.username); // Set the username from the user object\n      setMessage(response.data.message);\n      setIsAuthenticated(true);\n      setShowLogin(false);\n      setShowMenu(false); // Close menu after login\n      localStorage.setItem('token', response.data.token); // Store token\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setMessage(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'An error occurred');\n    }\n  };\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    setUsername('');\n    setEmail('');\n    localStorage.removeItem('token'); // Clear token on logout\n  };\n  const getInitials = user => {\n    if (!user) return ''; // Return an empty string if the name is undefined or empty\n    const nameArray = user.split(' ');\n    return nameArray[0][0].toUpperCase() + (nameArray[1] ? nameArray[1][0].toUpperCase() : '');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-auth\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-icon\",\n      onClick: () => setShowMenu(!showMenu),\n      children: isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"initials\",\n        children: getInitials(username)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        src: default_image,\n        alt: \"Default User Icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dropdown-menu\",\n      children: isAuthenticated ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Signed in as \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 50\n          }, this), username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 29\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: showSignup ?\n        /*#__PURE__*/\n        // Signup Form\n        _jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 37\n          }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSignup,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Username\",\n              value: username,\n              onChange: e => setUsername(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Password\",\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: role,\n              onChange: e => setRole(e.target.value),\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Role\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 45\n              }, this), roles.map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: role.name,\n                children: role.name\n              }, role._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 49\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Already registered? \", /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => {\n                setShowSignup(false);\n                setShowLogin(true);\n              },\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 60\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true) : showLogin ?\n        /*#__PURE__*/\n        // Login Form\n        _jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 37\n          }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleLogin,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Password\",\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Not yet registered? \", /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => {\n                setShowLogin(false);\n                setShowSignup(true);\n              },\n              children: \"Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 60\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true) :\n        /*#__PURE__*/\n        // Default Menu when not authenticated\n        _jsxDEV(\"p\", {\n          children: [\"Not signed up yet? \", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => setShowSignup(true),\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 55\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 33\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n}\n_s(UserIcon, \"I9A0vZxtgHM7dvkQFKV1puDZ7RE=\");\n_c = UserIcon;\nexport default UserIcon;\nvar _c;\n$RefreshReg$(_c, \"UserIcon\");","map":{"version":3,"names":["React","useState","useEffect","jwtDecode","axios","default_image","jsxDEV","_jsxDEV","Fragment","_Fragment","UserIcon","_s","isAuthenticated","setIsAuthenticated","showMenu","setShowMenu","showLogin","setShowLogin","showSignup","setShowSignup","username","setUsername","email","setEmail","password","setPassword","role","setRole","roles","setRoles","message","setMessage","loading","setLoading","token","localStorage","getItem","decodedToken","user","error","console","removeItem","fetchRoles","response","get","data","handleSignup","e","preventDefault","post","_error$response","_error$response$data","handleLogin","setItem","_error$response2","_error$response2$data","handleLogout","getInitials","nameArray","split","toUpperCase","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onSubmit","type","placeholder","value","onChange","target","required","map","name","_id","_c","$RefreshReg$"],"sources":["C:/Learning/Programming_Projects/Programming_Projects/Weba-Hub/Frontend/weba-hub/src/Components/UserIcon/UserIcon.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n\r\nimport axios from 'axios';\r\nimport './UserIcon.css';\r\nimport default_image from '../../Assets/default-image.jpg'\r\n\r\nfunction UserIcon() {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showLogin, setShowLogin] = useState(false);\r\n    const [showSignup, setShowSignup] = useState(false);\r\n    const [username, setUsername] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [role, setRole] = useState('');\r\n    const [roles, setRoles] = useState([]);\r\n    const [message, setMessage] = useState('');\r\n    const [loading, setLoading] = useState(true); // Add loading state\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            try {\r\n                const decodedToken = jwtDecode(token); // Decode token\r\n                setIsAuthenticated(true);\r\n                setUsername(decodedToken.user || ''); // Handle missing fields gracefully\r\n                setEmail(decodedToken.email || '');\r\n            } catch (error) {\r\n                console.error('Error decoding token:', error);\r\n                localStorage.removeItem('token'); // Remove invalid token\r\n                setIsAuthenticated(false);\r\n            }\r\n        }\r\n        setLoading(false); // Set loading to false after token validation\r\n    }, []);\r\n    \r\n\r\n    useEffect(() => {\r\n        const fetchRoles = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/api/roles/fetch');\r\n                setRoles(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching roles:', error);\r\n            }\r\n        };\r\n\r\n        fetchRoles();\r\n    }, []);\r\n\r\n    const handleSignup = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/users/register', {\r\n                username,\r\n                password,\r\n                email,\r\n                role\r\n            });\r\n            setMessage(response.data.message);\r\n            setShowSignup(false);\r\n            setShowLogin(true);\r\n        } catch (error) {\r\n            setMessage(error.response?.data?.message || 'An error occurred');\r\n        }\r\n    };\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/users/login', {\r\n                email,\r\n                password\r\n            });\r\n            // Access the user object from the response\r\n        const { user } = response.data; // Extract the user object\r\n        setUsername(user.username); // Set the username from the user object\r\n        setMessage(response.data.message);\r\n        setIsAuthenticated(true);\r\n        setShowLogin(false);\r\n        setShowMenu(false); // Close menu after login\r\n        localStorage.setItem('token', response.data.token); // Store token\r\n    } catch (error) {\r\n        setMessage(error.response?.data?.message || 'An error occurred');\r\n    }\r\n};\r\n\r\n    const handleLogout = () => {\r\n        setIsAuthenticated(false);\r\n        setUsername('');\r\n        setEmail('');\r\n        localStorage.removeItem('token'); // Clear token on logout\r\n    };\r\n\r\n    const getInitials = (user) => {\r\n        if (!user) return ''; // Return an empty string if the name is undefined or empty\r\n        const nameArray = user.split(' ');\r\n        return nameArray[0][0].toUpperCase() + (nameArray[1] ? nameArray[1][0].toUpperCase() : '');\r\n    };\r\n    \r\n\r\n    return (\r\n        <div className=\"user-auth\">\r\n            {/* User Icon */}\r\n            <div className=\"user-icon\" onClick={() => setShowMenu(!showMenu)}>\r\n                {isAuthenticated ? (\r\n                    <div className=\"initials\">{getInitials(username)}</div>\r\n                ) : (\r\n                    <img src={default_image} alt=\"Default User Icon\" />\r\n                )}\r\n            </div>\r\n\r\n            {/* Menu and Forms */}\r\n            {showMenu && (\r\n                <div className=\"dropdown-menu\">\r\n                    {isAuthenticated ? (\r\n                        <>\r\n                            <p>Signed in as <br/><br/>{username}</p>\r\n                            <p>{email}</p> {/* Display the email address */}\r\n                            <button onClick={handleLogout}>Logout</button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            {showSignup ? (\r\n                                // Signup Form\r\n                                <>\r\n                                    <h3>Sign Up</h3>\r\n                                    {message && <p>{message}</p>}\r\n                                    <form onSubmit={handleSignup}>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Username\"\r\n                                            value={username}\r\n                                            onChange={(e) => setUsername(e.target.value)}\r\n                                            required\r\n                                        />\r\n                                        <input\r\n                                            type=\"email\"\r\n                                            placeholder=\"Email\"\r\n                                            value={email}\r\n                                            onChange={(e) => setEmail(e.target.value)}\r\n                                            required\r\n                                        />\r\n                                        <input\r\n                                            type=\"password\"\r\n                                            placeholder=\"Password\"\r\n                                            value={password}\r\n                                            onChange={(e) => setPassword(e.target.value)}\r\n                                            required\r\n                                        />\r\n                                        <select value={role} onChange={(e) => setRole(e.target.value)} required>\r\n                                            <option value=\"\">Select Role</option>\r\n                                            {roles.map((role) => (\r\n                                                <option key={role._id} value={role.name}>\r\n                                                    {role.name}\r\n                                                </option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <button type=\"submit\">Sign Up</button>\r\n                                    </form>\r\n                                    <p>Already registered? <span onClick={() => { setShowSignup(false); setShowLogin(true); }}>Login</span></p>\r\n                                </>\r\n                            ) : showLogin ? (\r\n                                // Login Form\r\n                                <>\r\n                                    <h3>Login</h3>\r\n                                    {message && <p>{message}</p>}\r\n                                    <form onSubmit={handleLogin}>\r\n                                        <input\r\n                                            type=\"email\"\r\n                                            placeholder=\"Email\"\r\n                                            value={email}\r\n                                            onChange={(e) => setEmail(e.target.value)}\r\n                                            required\r\n                                        />\r\n                                        <input\r\n                                            type=\"password\"\r\n                                            placeholder=\"Password\"\r\n                                            value={password}\r\n                                            onChange={(e) => setPassword(e.target.value)}\r\n                                            required\r\n                                        />\r\n                                        <button type=\"submit\">Login</button>\r\n                                    </form>\r\n                                    <p>Not yet registered? <span onClick={() => { setShowLogin(false); setShowSignup(true); }}>Sign up</span></p>\r\n                                </>\r\n                            ) : (\r\n                                // Default Menu when not authenticated\r\n                                <p>Not signed up yet? <span onClick={() => setShowSignup(true)}>Sign up</span></p>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UserIcon;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}